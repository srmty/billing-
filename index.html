<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Billing Dashboard</title>
  
  <!-- Load React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- Load Babel for JSX support -->
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  
  <!-- Load Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Load Lucide Icons -->
  <script src="https://unpkg.com/lucide@0.263.1/dist/umd/lucide.min.js"></script>
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }
    
    /* Simple shadcn-like components */
    .card {
      background: white;
      border-radius: 0.5rem;
      border: 1px solid #e2e8f0;
      overflow: hidden;
    }
    
    .card-header {
      padding: 1.5rem 1.5rem 0 1.5rem;
    }
    
    .card-content {
      padding: 1.5rem;
    }
    
    .card-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }
    
    .card-description {
      color: #64748b;
      font-size: 0.875rem;
    }
    
    .badge {
      display: inline-flex;
      align-items: center;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      line-height: 1;
      padding: 0.25rem 0.5rem;
    }
    
    .badge-default {
      background-color: #3b82f6;
      color: white;
    }
    
    .badge-secondary {
      background-color: #6b7280;
      color: white;
    }
    
    .badge-destructive {
      background-color: #ef4444;
      color: white;
    }
    
    .btn {
      align-items: center;
      border-radius: 0.375rem;
      display: inline-flex;
      font-size: 0.875rem;
      font-weight: 500;
      justify-content: center;
      line-height: 1;
      padding: 0.5rem 1rem;
      transition-duration: 150ms;
      transition-property: background-color, border-color, color;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .btn-primary {
      background-color: #3b82f6;
      color: white;
    }
    
    .btn-primary:hover {
      background-color: #2563eb;
    }
    
    .btn-destructive {
      background-color: #ef4444;
      color: white;
    }
    
    .btn-destructive:hover {
      background-color: #dc2626;
    }
    
    .btn-sm {
      font-size: 0.75rem;
      padding: 0.25rem 0.5rem;
    }
    
    .btn-icon {
      padding: 0.25rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn-outline {
      background-color: transparent;
      border: 1px solid #e2e8f0;
      color: #0f172a;
    }
    
    .input {
      border-radius: 0.375rem;
      border: 1px solid #e2e8f0;
      font-size: 0.875rem;
      line-height: 1.25rem;
      padding: 0.5rem;
      width: 100%;
    }
    
    .input:focus {
      border-color: #3b82f6;
      outline: none;
      ring: 2px solid #3b82f6;
    }
    
    .dialog-backdrop {
      background-color: rgba(0, 0, 0, 0.5);
      inset: 0;
      position: fixed;
      z-index: 50;
    }
    
    .dialog-content {
      background-color: white;
      border-radius: 0.5rem;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      left: 50%;
      max-width: 28rem;
      padding: 1.5rem;
      position: fixed;
      top: 50%;
      transform: translate(-50%, -50%);
      width: calc(100% - 2rem);
      z-index: 51;
    }
    
    .dialog-header {
      margin-bottom: 1rem;
    }
    
    .dialog-title {
      font-size: 1.25rem;
      font-weight: 600;
    }
    
    .tabs {
      display: flex;
      flex-direction: column;
    }
    
    .tabs-list {
      display: flex;
      border-bottom: 1px solid #e2e8f0;
      margin-bottom: 1rem;
    }
    
    .tabs-trigger {
      align-items: center;
      border-bottom: 2px solid transparent;
      color: #64748b;
      cursor: pointer;
      display: inline-flex;
      font-size: 0.875rem;
      font-weight: 500;
      padding: 0.5rem 1rem;
      transition: border-color 0.15s, color 0.15s;
    }
    
    .tabs-trigger-active {
      border-bottom-color: #3b82f6;
      color: #3b82f6;
    }
    
    .tabs-content {
      display: none;
    }
    
    .tabs-content-active {
      display: block;
    }
    
    .select {
      border: 1px solid #e2e8f0;
      border-radius: 0.375rem;
      font-size: 0.875rem;
      height: 2.5rem;
      padding: 0 0.75rem;
      width: 100%;
    }
  </style>
</head>
<body class="bg-gray-100 p-4">
  <div id="root"></div>

  <script type="text/babel">
    // Create simplified versions of the shadcn components
    const Card = ({ children, className = "" }) => (
      <div className={`card ${className}`}>{children}</div>
    );
    
    const CardHeader = ({ children, className = "" }) => (
      <div className={`card-header ${className}`}>{children}</div>
    );
    
    const CardContent = ({ children, className = "" }) => (
      <div className={`card-content ${className}`}>{children}</div>
    );
    
    const CardTitle = ({ children, className = "" }) => (
      <h3 className={`card-title ${className}`}>{children}</h3>
    );
    
    const CardDescription = ({ children, className = "" }) => (
      <p className={`card-description ${className}`}>{children}</p>
    );
    
    const Badge = ({ children, variant = "default", className = "" }) => (
      <span className={`badge badge-${variant} ${className}`}>{children}</span>
    );
    
    const Button = ({ 
      children, 
      variant = "primary", 
      size = "default", 
      className = "", 
      onClick, 
      disabled = false 
    }) => (
      <button 
        className={`btn btn-${variant} ${size === "sm" ? "btn-sm" : ""} ${size === "icon" ? "btn-icon" : ""} ${className}`} 
        onClick={onClick}
        disabled={disabled}
      >
        {children}
      </button>
    );
    
    const Input = ({ 
      type = "text", 
      value, 
      onChange, 
      placeholder, 
      className = "", 
      id,
      min,
      max,
      defaultValue
    }) => (
      <input 
        type={type} 
        value={value} 
        onChange={onChange} 
        placeholder={placeholder} 
        className={`input ${className}`}
        id={id}
        min={min}
        max={max}
        defaultValue={defaultValue}
      />
    );
    
    const Dialog = ({ children, open, onOpenChange }) => {
      if (!open) return null;
      
      return (
        <>
          <div className="dialog-backdrop" onClick={() => onOpenChange(false)} />
          <div className="dialog-content">
            {children}
          </div>
        </>
      );
    };
    
    const DialogTrigger = ({ children, asChild, onClick }) => {
      return React.cloneElement(children, { 
        onClick: onClick
      });
    };
    
    const DialogContent = ({ children }) => (
      <div>{children}</div>
    );
    
    const DialogHeader = ({ children }) => (
      <div className="dialog-header">{children}</div>
    );
    
    const DialogTitle = ({ children }) => (
      <h2 className="dialog-title">{children}</h2>
    );
    
    const Tabs = ({ children, defaultValue }) => {
      const [activeTab, setActiveTab] = React.useState(defaultValue);
      
      return (
        <div className="tabs">
          {React.Children.map(children, child => {
            if (child.type === TabsList || child.type === TabsContent) {
              return React.cloneElement(child, { activeTab, setActiveTab });
            }
            return child;
          })}
        </div>
      );
    };
    
    const TabsList = ({ children, activeTab, setActiveTab }) => (
      <div className="tabs-list">
        {React.Children.map(children, child => {
          return React.cloneElement(child, { activeTab, setActiveTab });
        })}
      </div>
    );
    
    const TabsTrigger = ({ children, value, activeTab, setActiveTab }) => (
      <div 
        className={`tabs-trigger ${activeTab === value ? 'tabs-trigger-active' : ''}`}
        onClick={() => setActiveTab(value)}
      >
        {children}
      </div>
    );
    
    const TabsContent = ({ children, value, activeTab }) => (
      <div className={`tabs-content ${activeTab === value ? 'tabs-content-active' : ''}`}>
        {children}
      </div>
    );
    
    const Select = ({ children, value, onValueChange, className = "" }) => (
      <select 
        className={`select ${className}`} 
        value={value} 
        onChange={(e) => onValueChange(e.target.value)}
      >
        {children}
      </select>
    );
    
    const SelectTrigger = ({ children }) => <>{children}</>;
    
    const SelectValue = ({ placeholder }) => (
      <option value="" disabled>{placeholder}</option>
    );
    
    const SelectContent = ({ children }) => <>{children}</>;
    
    const SelectItem = ({ children, value }) => (
      <option value={value}>{children}</option>
    );

    // Main component
    const BillingDashboard = () => {
      // Destructuring Lucide icons
      const { TrashIcon, PlusIcon, MinusIcon, PackageIcon, Users2Icon, HistoryIcon, PercentIcon } = lucide;
      
      const initialItems = [
        { id: 1, name: "Item A", price: 100, quantity: 10, taxRate: 10 },
        { id: 2, name: "Item B", price: 200, quantity: 5, taxRate: 5 },
        { id: 3, name: "Item C", price: 150, quantity: 8, taxRate: 8 },
      ];

      const initialCustomers = [
        { id: 1, name: "John Doe", phone: "555-1234", creditLimit: 1000, creditUsed: 200 },
        { id: 2, name: "Jane Smith", phone: "555-5678", creditLimit: 2000, creditUsed: 500 },
      ];

      const initialTransactions = [
        { id: 1, customerId: 1, items: [{ id: 1, name: "Item A", price: 100, quantity: 2, taxRate: 10 }], total: 220, tax: 20, paymentMode: "paid", date: "2025-03-28" },
        { id: 2, customerId: 2, items: [{ id: 2, name: "Item B", price: 200, quantity: 1, taxRate: 5 }], total: 210, tax: 10, paymentMode: "credit", date: "2025-03-29" },
        { id: 3, customerId: 1, items: [{ id: 3, name: "Item C", price: 150, quantity: 3, taxRate: 8 }], total: 486, tax: 36, paymentMode: "credit", date: "2025-03-30" },
      ];

      const [items, setItems] = React.useState(initialItems);
      const [cart, setCart] = React.useState([]);
      const [newItem, setNewItem] = React.useState({ name: "", price: "", quantity: "", taxRate: "" });
      const [searchTerm, setSearchTerm] = React.useState("");
      const [customers, setCustomers] = React.useState(initialCustomers);
      const [transactions, setTransactions] = React.useState(initialTransactions);
      const [selectedCustomer, setSelectedCustomer] = React.useState(null);
      const [newCustomer, setNewCustomer] = React.useState({ name: "", phone: "", creditLimit: "" });
      const [paymentMode, setPaymentMode] = React.useState("paid");
      const [addItemDialogOpen, setAddItemDialogOpen] = React.useState(false);

      // Add to cart with error handling and stock management
      const addToCart = (item, qty) => {
        const quantity = parseInt(qty);
        
        if (isNaN(quantity) || quantity < 1) {
          alert("Please enter a valid quantity!");
          return;
        }
        
        if (quantity > item.quantity) {
          alert("Not enough stock available!");
          return;
        }
        
        // Update items stock
        setItems(items.map(i => 
          i.id === item.id ? { ...i, quantity: i.quantity - quantity } : i
        ));
        
        // Update cart
        const existingItem = cart.find((c) => c.id === item.id);
        if (existingItem) {
          setCart(
            cart.map((c) =>
              c.id === item.id ? { ...c, quantity: c.quantity + quantity } : c
            )
          );
        } else {
          setCart([...cart, { ...item, quantity }]);
        }
      };

      // Remove item from cart
      const removeFromCart = (itemId) => {
        const itemToRemove = cart.find(item => item.id === itemId);
        
        // Return quantity to stock
        setItems(items.map(item => 
          item.id === itemId 
            ? { ...item, quantity: item.quantity + itemToRemove.quantity } 
            : item
        ));
        
        // Remove from cart
        setCart(cart.filter(item => item.id !== itemId));
      };

      // Adjust quantity in cart
      const adjustQuantity = (itemId, amount) => {
        const itemInCart = cart.find(item => item.id === itemId);
        const itemInStock = items.find(item => item.id === itemId);
        
        if (amount > 0 && itemInStock.quantity < 1) {
          alert("No more stock available!");
          return;
        }
        
        if (itemInCart.quantity + amount < 1) {
          removeFromCart(itemId);
          return;
        }
        
        // Update stock
        setItems(items.map(item => 
          item.id === itemId 
            ? { ...item, quantity: item.quantity - amount } 
            : item
        ));
        
        // Update cart quantity
        setCart(cart.map(item => 
          item.id === itemId 
            ? { ...item, quantity: item.quantity + amount } 
            : item
        ));
      };

      // Add new inventory item
      const handleAddNewItem = () => {
        if (!newItem.name || !newItem.price || !newItem.quantity || !newItem.taxRate) {
          alert("Please fill all fields");
          return;
        }
        
        const newItemWithId = {
          ...newItem,
          id: Math.max(...items.map(item => item.id), 0) + 1,
          price: parseFloat(newItem.price),
          quantity: parseInt(newItem.quantity),
          taxRate: parseFloat(newItem.taxRate)
        };
        
        setItems([...items, newItemWithId]);
        setNewItem({ name: "", price: "", quantity: "", taxRate: "" });
        setAddItemDialogOpen(false);
      };

      // Add new customer
      const handleAddNewCustomer = () => {
        if (!newCustomer.name || !newCustomer.phone || !newCustomer.creditLimit) {
          alert("Please fill all customer fields");
          return;
        }
        
        const newCustomerWithId = {
          ...newCustomer,
          id: Math.max(...customers.map(customer => customer.id), 0) + 1,
          creditLimit: parseFloat(newCustomer.creditLimit),
          creditUsed: 0
        };
        
        setCustomers([...customers, newCustomerWithId]);
        setNewCustomer({ name: "", phone: "", creditLimit: "" });
      };

      // Calculate subtotal before tax
      const calculateSubtotal = () => {
        return cart.reduce((acc, item) => acc + item.price * item.quantity, 0);
      };

      // Calculate tax
      const calculateTax = () => {
        return cart.reduce((acc, item) => {
          const itemTax = (item.price * item.quantity) * (item.taxRate / 100);
          return acc + itemTax;
        }, 0);
      };

      // Calculate total with tax
      const calculateTotal = () => {
        return calculateSubtotal() + calculateTax();
      };

      // Complete purchase
      const completePurchase = () => {
        if (!selectedCustomer) {
          alert("Please select a customer before completing purchase");
          return;
        }
        
        if (cart.length === 0) {
          alert("Cart is empty");
          return;
        }
        
        const total = calculateTotal();
        
        // For credit payment, check credit limit
        if (paymentMode === "credit") {
          const newCreditUsed = selectedCustomer.creditUsed + total;
          if (newCreditUsed > selectedCustomer.creditLimit) {
            alert("This purchase exceeds the customer's credit limit");
            return;
          }
          
          // Update customer's credit used
          setCustomers(customers.map(customer => 
            customer.id === selectedCustomer.id 
              ? { ...customer, creditUsed: newCreditUsed } 
              : customer
          ));
        }
        
        // Create new transaction
        const newTransaction = {
          id: Math.max(...transactions.map(transaction => transaction.id), 0) + 1,
          customerId: selectedCustomer.id,
          items: [...cart],
          total: total,
          tax: calculateTax(),
          paymentMode: paymentMode,
          date: new Date().toISOString().split('T')[0]
        };
        
        setTransactions([...transactions, newTransaction]);
        
        // Reset cart
        setCart([]);
        alert(`Purchase completed! Total: $${total.toFixed(2)}`);
      };

      // Filter items based on search
      const filteredItems = items.filter(item => 
        item.name.toLowerCase().includes(searchTerm.toLowerCase())
      );

      // Filter transactions based on payment mode
      const filterTransactionsByPaymentMode = (mode) => {
        return transactions.filter(transaction => transaction.paymentMode === mode);
      };

      return (
        <div className="p-4 max-w-6xl mx-auto">
          <header className="mb-6">
            <h1 className="text-2xl font-bold">Billing Dashboard</h1>
            <p className="text-gray-500">Manage your inventory, customer orders, and credit accounts</p>
          </header>
          
          <Tabs defaultValue="billing">
            <TabsList>
              <TabsTrigger value="billing"><PackageIcon className="h-4 w-4 mr-2" />Billing</TabsTrigger>
              <TabsTrigger value="customers"><Users2Icon className="h-4 w-4 mr-2" />Customers</TabsTrigger>
              <TabsTrigger value="history"><HistoryIcon className="h-4 w-4 mr-2" />Transaction History</TabsTrigger>
            </TabsList>
            
            {/* Billing Tab */}
            <TabsContent value="billing">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {/* Inventory Section */}
                <Card>
                  <CardHeader className="flex flex-row items-center justify-between">
                    <div>
                      <CardTitle>Inventory</CardTitle>
                      <CardDescription>Available items for sale</CardDescription>
                    </div>
                    <Dialog open={addItemDialogOpen} onOpenChange={setAddItemDialogOpen}>
                      <DialogTrigger onClick={() => setAddItemDialogOpen(true)}>
                        <Button size="sm">Add New Item</Button>
                      </DialogTrigger>
                      <DialogContent>
                        <DialogHeader>
                          <DialogTitle>Add New Inventory Item</DialogTitle>
                        </DialogHeader>
                        <div className="space-y-3 mt-4">
                          <div className="space-y-2">
                            <label className="text-sm font-medium">Item Name</label>
                            <Input
                              placeholder="Item name"
                              value={newItem.name}
                              onChange={(e) => setNewItem({...newItem, name: e.target.value})}
                            />
                          </div>
                          <div className="space-y-2">
                            <label className="text-sm font-medium">Price ($)</label>
                            <Input
                              type="number"
                              placeholder="Price"
                              value={newItem.price}
                              onChange={(e) => setNewItem({...newItem, price: e.target.value})}
                            />
                          </div>
                          <div className="space-y-2">
                            <label className="text-sm font-medium">Quantity</label>
                            <Input
                              type="number"
                              placeholder="Quantity"
                              value={newItem.quantity}
                              onChange={(e) => setNewItem({...newItem, quantity: e.target.value})}
                            />
                          </div>
                          <div className="space-y-2">
                            <label className="text-sm font-medium">Tax Rate (%)</label>
                            <Input
                              type="number"
                              placeholder="Tax Rate"
                              value={newItem.taxRate}
                              onChange={(e) => setNewItem({...newItem, taxRate: e.target.value})}
                            />
                          </div>
                          <Button onClick={handleAddNewItem} className="w-full">Add to Inventory</Button>
                        </div>
                      </DialogContent>
                    </Dialog>
                  </CardHeader>
                  <CardContent>
                    <div className="mb-4">
                      <Input 
                        placeholder="Search items..." 
                        value={searchTerm}
                        onChange={(e) => setSearchTerm(e.target.value)}
                      />
                    </div>
                    <div className="overflow-x-auto">
                      {/* Custom table implementation */}
                      <div className="w-full border rounded-md">
                        {/* Table Header */}
                        <div className="grid grid-cols-6 bg-gray-100 p-3 font-medium border-b">
                          <div>Name</div>
                          <div>Price</div>
                          <div>Tax</div>
                          <div>Stock</div>
                          <div>Quantity</div>
                          <div>Action</div>
                        </div>
                        
                        {/* Table Body */}
                        <div className="divide-y">
                          {filteredItems.map((item) => (
                            <div key={item.id} className="grid grid-cols-6 p-3 items-center">
                              <div>{item.name}</div>
                              <div>${item.price.toFixed(2)}</div>
                              <div>{item.taxRate}%</div>
                              <div>
                                <Badge variant={item.quantity > 3 ? "default" : "destructive"}>
                                  {item.quantity}
                                </Badge>
                              </div>
                              <div>
                                <Input
                                  type="number"
                                  min="1"
                                  max={item.quantity}
                                  defaultValue={1}
                                  id={`qty-${item.id}`}
                                  className="w-16"
                                />
                              </div>
                              <div>
                                <Button
                                  size="sm"
                                  disabled={item.quantity < 1}
                                  onClick={() => {
                                    const qty = document.getElementById(`qty-${item.id}`).value;
                                    addToCart(item, qty);
                                  }}
                                >
                                  Add
                                </Button>
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                  </CardContent>
                </Card>
                
                {/* Cart Section */}
                <Card>
                  <CardHeader>
                    <CardTitle>Customer Cart</CardTitle>
                    <div className="mt-4 grid grid-cols-2 gap-4">
                      <Select 
                        value={selectedCustomer ? selectedCustomer.id.toString() : ""}
                        onValueChange={(value) => {
                          const customer = customers.find(c => c.id === parseInt(value));
                          setSelectedCustomer(customer);
                        }}
                      >
                        <SelectValue placeholder="Select customer" />
                        {customers.map(customer => (
                          <SelectItem key={customer.id} value={customer.id.toString()}>
                            {customer.name}
                          </SelectItem>
                        ))}
                      </Select>
                      
                      <Select value={paymentMode} onValueChange={setPaymentMode}>
                        <SelectValue placeholder="Payment mode" />
                        <SelectItem value="paid">Paid</SelectItem>
                        <SelectItem value="credit">Credit</SelectItem>
                      </Select>
                    </div>
                  </CardHeader>
                  <CardContent>
                    {selectedCustomer && paymentMode === "credit" && (
                      <div className="mb-4 p-3 bg-gray-50 rounded-md">
                        <div className="flex justify-between">
                          <span>Credit Limit:</span>
                          <span>${selectedCustomer.creditLimit.toFixed(2)}</span>
                        </div>
                        <div className="flex justify-between">
                          <span>Credit Used:</span>
                          <span>${selectedCustomer.creditUsed.toFixed(2)}</span>
                        </div>
                        <div className="flex justify-between font-bold">
                          <span>Available Credit:</span>
                          <span>${(selectedCustomer.creditLimit - selectedCustomer.creditUsed).toFixed(2)}</span>
                        </div>
                      </div>
                    )}
                    
                    {cart.length > 0 ? (
                      <div className="overflow-x-auto">
                        {/* Custom cart table */}
                        <div className="w-full border rounded-md">
                          {/* Table Header */}
                          <div className="grid grid-cols-6 bg-gray-100 p-3 font-medium border-b">
                            <div>Item</div>
                            <div>Price</div>
                            <div>Tax</div>
                            <div>Qty</div>
                            <div>Subtotal</div>
                            <div>Actions</div>
                          </div>
                          
                          {/* Table Body */}
                          <div className="divide-y">
                            {cart.map((item) => (
                              <div key={item.id} className="grid grid-cols-6 p-3 items-center">
                                <div>{item.name}</div>
                                <div>${item.price.toFixed(2)}</div>
                                <div>{item.taxRate}%</div>
                                <div>
                                  <div className="flex items-center">
                                    <Button 
                                      variant="outline" 
                                      className="h-6 w-6" 
                                      onClick={() => adjustQuantity(item.id, -1)}
                                    >
                                      <MinusIcon className="h-3 w-3" />
                                    </Button>
                                    <span className="mx-2">{item.quantity}</span>
                                    <Button 
                                      variant="outline" 
                                      className="h-6 w-6" 
                                      onClick={() => adjustQuantity(item.id, 1)}
                                      disabled={items.find(i => i.id === item.id).quantity < 1}
                                    >
                                      <PlusIcon className="h-3 w-3" />
                                    </Button>
                                  </div>
                                </div>
                                <div>${(item.price * item.quantity).toFixed(2)}</div>
                                <div>
                                  <Button 
                                    variant="destructive" 
                                    className="h-7 w-7" 
                                    onClick={() => removeFromCart(item.id)}
                                  >
                                    <TrashIcon className="h-4 w-4" />
                                  </Button>
                                </div>
                              </div>
                            ))}
                          </div>
                        </div>
                      </div>
                    ) : (
                      <div className="text-center py-8 text-gray-500">
                        Cart is empty. Add items from inventory
                      </div>
                    )}
                    
                    {cart.length > 0 && (
                      <div className="mt-4 space-y-3">
                        <div className="flex justify-between p-2 bg-gray-50">
                          <span>Subtotal:</span>
                          <span>${calculateSubtotal().toFixed(2)}</span>
                        </div>
                        <div className="flex justify-between p-2 bg-gray-50">
                          <span className="flex items-center">
                            Tax <PercentIcon className="h-4 w-4 ml-1" />:
                          </span>
                          <span>${calculateTax().toFixed(2)}</span>
                        </div>
                        <div className="flex justify-between p-2 bg-gray-100 font-bold">
                          <span>Total:</span>
                          <span>${calculateTotal().toFixed(2)}</span>
                        </div>
                        <Button 
                          className="w-full mt-4" 
                          onClick={completePurchase}
                          disabled={!selectedCustomer || cart.length === 0}
                        >
                          Complete Purchase
                        </Button>
                      </div>
                    )}
                  </CardContent>
                </Card>
              </div>
            </TabsContent>
            
            {/* Customers Tab */}
            <TabsContent value="customers">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {/* Existing Customers */}
                <Card>
                  <CardHeader>
                    <CardTitle>Customers</CardTitle>
                    <CardDescription>View and manage your customer accounts</CardDescription>
                  </CardHeader>
                  <CardContent>
                    <div className="overflow-x-auto">
                      {/* Custom table implementation */}
                      <div className="w-full border rounded-md">
                        {/* Table Header */}
                        <div className="grid grid-cols-4 bg-gray-100 p-3 font-medium border-b">
                          <div>Name</div>
                          <div>Phone</div>
                          <div>Credit Limit</div>
                          <div>Credit Used</div>
                        </div>
                        
                        {/* Table Body */}
                        <div className="divide-y">
                          {customers.map((customer) => (
                            <div key={customer.id} className="grid grid-cols-4 p-3 items-center">
                              <div>{customer.name}</div>
                              <div>{customer.phone}</div>
                              <div>${customer.creditLimit.toFixed(2)}</div>
                              <div>
                                <Badge 
                                  variant={
                                    customer.creditUsed / customer.creditLimit > 0.8 
                                      ? "destructive" 
                                      : customer.creditUsed / customer.creditLimit > 0.5 
                                        ? "secondary" 
                                        : "default"
                                  }
                                >
                                  ${customer.creditUsed.toFixed(2)}
                                </Badge>
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                  </CardContent>
                </Card>
                
                {/* Add New Customer */}
                <Card>
                  <CardHeader>
                    <CardTitle>Add New Customer</CardTitle>
                    <CardDescription>Create a new customer account</CardDescription>
                  </CardHeader>
                  <CardContent>
                    <div className="space-y-4">
                      <div className="space-y-2">
                        <label className="text-sm font-medium">Customer Name</label>
                        <Input
                          placeholder="Full name"
                          value={newCustomer.name}
                          onChange={(e) => setNewCustomer({...newCustomer, name: e.target.value})}
                        />
                      </div>
                      
                      <div className="space-y-2">
                        <label className="text-sm font-medium">Phone Number</label>
                        <Input
                          placeholder="Phone number"
                          value={newCustomer.phone}
                          onChange={(e) => setNewCustomer({...newCustomer, phone: e.target.value})}
                        />
                      </div>
                      
                      <div className="space-y-2">
                        <label className="text-sm font-medium">Credit Limit ($)</label>
                        <Input
                          type="number"
                          placeholder="Credit limit"
                          value={newCustomer.creditLimit}
                          onChange={(e) => setNewCustomer({...newCustomer, creditLimit: e.target.value})}
                        />
                      </div>
                      
                      <Button onClick={handleAddNewCustomer} className="w-full">
                        Add Customer
                      </Button>
                    </div>
                  </CardContent>
                </Card>
              </div>
            </TabsContent>
            
            {/* Transaction History Tab */}
            <TabsContent value="history">
              <Card>
                <CardHeader>
                  <CardTitle>Transaction History</CardTitle>
                  <div className="flex space-x-2 mt-2">
                    <Button 
                      variant={paymentMode === "paid" ? "primary" : "outline"}
                      size="sm"
                      onClick={() => setPaymentMode("paid")}
                    >
                      Paid
                    </Button>
                    <Button 
                      variant={paymentMode === "credit" ? "primary" : "outline"}
                      size="sm"
                      onClick={() => setPaymentMode("credit")}
                    >
                      Credit
                    </Button>
                  </div>
                </CardHeader>
                <CardContent>
                  <div className="overflow-x-auto">
                    {/* Custom table implementation */}
                    <div className="w-full border rounded-md">
                      {/* Table Header */}
                      <div className="grid grid-cols-5 bg-gray-100 p-3 font-medium border-b">
                        <div>Date</div>
                        <div>Customer</div>
                        <div>Items</div>
                        <div>Tax</div>
                        <div>Total</div>
                      </div>
                      
                      {/* Table Body */}
                      <div className="divide-y">
                        {filterTransactionsByPaymentMode(paymentMode).map((transaction) => {
                          const customer = customers.find(c => c.id === transaction.customerId);
                          return (
                            <div key={transaction.id} className="grid grid-cols-5 p-3 items-center">
                              <div>{transaction.date}</div>
                              <div>{customer ? customer.name : "Unknown"}</div>
                              <div>
                                {transaction.items.map(item => (
                                  <div key={item.id} className="text-xs">
                                    {item.quantity} x {item.name}
                                  </div>
                                ))}
                              </div>
                              <div>${transaction.tax.toFixed(2)}</div>
                              <div className="font-medium">${transaction.total.toFixed(2)}</div>
                            </div>
                          );
                        })}
                        
                        {filterTransactionsByPaymentMode(paymentMode).length === 0 && (
                          <div className="p-4 text-center text-gray-500">
                            No {paymentMode} transactions found
                          </div>
                        )}
                      </div>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </TabsContent>
          </Tabs>
        </div>
      );
    };

    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<BillingDashboard />);
  </script>
</body>
</html>
